<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.5.xsd
        http://www.liquibase.org/xml/ns/dbchangelog-ext http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd">

    <changeSet id='create-tournaments_table' author="langelihle" context="localhost">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="tournaments"/>
            </not>
        </preConditions>
        <sql>
            CREATE TABLE tournaments
            (
                tournament_id   INT PRIMARY KEY,
                tournament_name VARCHAR(100),
                game_id         INT,
                start_date      DATE,
                end_date        DATE,
                FOREIGN KEY (game_id) REFERENCES Games (id)
            );
        </sql>
    </changeSet>

    <changeSet id='create-tournaments-sequence' author="langelihle" context="localhost">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="tournaments"/>
        </preConditions>
        <sql>
            CREATE SEQUENCE tournaments_id_seq;
        </sql>
    </changeSet>

    <changeSet id='set-tournaments-sequence' author="langelihle" context="localhost">
        <preConditions onFail="MARK_RAN">
            <tableExists tableName="tournaments"/>
        </preConditions>
        <sql>
            ALTER TABLE tournaments ALTER COLUMN tournament_id SET DEFAULT nextval('tournaments_id_seq');
        </sql>
    </changeSet>

</databaseChangeLog>